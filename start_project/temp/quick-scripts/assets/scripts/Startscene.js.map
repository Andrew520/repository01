{"version":3,"sources":["Startscene.js"],"names":["cc","Class","extends","Component","properties","scoreview","Node","scoreItem","Prefab","setview","Sprite","slider_h","Slider","onLoad","getComponent","ScrollView","onSliderHEvent","sender","volumeSetting","progress","start","volume","audioEngine","setEffectsVolume","updateScoreList","scoreArr","log","i","cnt","length","item","instantiate","itemData","label","getChildByName","Label","string","score","time","content","addChild","playGame","director","loadScene","checkShowScoreView","active","node","JSON","parse","sys","localStorage","getItem","error","gameSetView","active1","clearStorage","removeItem","goBack"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAC,mBAAUL,GAAGM,IAjBL;AAkBRC,mBAAUP,GAAGQ,MAlBL;;AAoBRC,iBAAQT,GAAGU,MApBH;;AAsBR;AACAC,kBAAUX,GAAGY;;AAvBL,KAHP;;AA8BL;;AAEAC,UAhCK,oBAgCK;AACN,aAAKR,SAAL,GAAiB,KAAKA,SAAL,CAAeS,YAAf,CAA4Bd,GAAGe,UAA/B,CAAjB;AACH,KAlCI;;;AAoCL;AACAC,kBArCK,0BAqCWC,MArCX,EAqCmB;AACrB,aAAKC,aAAL,CAAmBD,OAAOE,QAA1B;AACF,KAvCI;AAyCLC,SAzCK,mBAyCG,CAEP,CA3CI;;;AA6CLF,mBAAe,uBAASG,MAAT,EAAiB;AAC5BrB,WAAGsB,WAAH,CAAeC,gBAAf,CAAgCF,MAAhC;AACH,KA/CI;;AAiDL;AACAG,qBAAiB,yBAASC,QAAT,EAAmB;AAChCzB,WAAG0B,GAAH,CAAO,iBAAP,EAAyBD,QAAzB;AACA,aAAI,IAAIE,IAAI,CAAR,EAAUC,MAAMH,SAASI,MAA7B,EAAoCF,IAAEC,GAAtC,EAA0CD,GAA1C,EACA;AACI,gBAAIG,OAAO9B,GAAG+B,WAAH,CAAe,KAAKxB,SAApB,CAAX;AACA,gBAAIyB,WAAWP,SAASE,CAAT,CAAf;AACA,gBAAIM,QAAQH,KAAKI,cAAL,CAAoB,OAApB,CAAZ;AACAD,kBAAMnB,YAAN,CAAmBd,GAAGmC,KAAtB,EAA6BC,MAA7B,GAAsC,WAASJ,SAASK,KAAlB,GAAyB,MAAzB,GAAgC,OAAhC,GAAyCL,SAASM,IAAxF;;AAEA,iBAAKjC,SAAL,CAAekC,OAAf,CAAuBC,QAAvB,CAAgCV,IAAhC;AACH;AACJ,KA7DI;;AA+DLW,cAAU,oBAAW;AACjBzC,WAAG0B,GAAH,CAAO,UAAP;AACA1B,WAAG0C,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH,KAlEI;;AAoELC,wBAAoB,8BAAW;AAC3B,YAAIC,SAAS,KAAKxC,SAAL,CAAeyC,IAAf,CAAoBD,MAAjC;AACA,aAAKxC,SAAL,CAAeyC,IAAf,CAAoBD,MAApB,GAA6B,CAACA,MAA9B;;AAEA,YAAG,KAAKxC,SAAL,CAAeyC,IAAf,CAAoBD,MAAvB,EAA8B;AAC1B,gBAAI;AACA,oBAAIpB,WAAWsB,KAAKC,KAAL,CAAWhD,GAAGiD,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,UAA5B,CAAX,CAAf;;AAEA1B,2BAAWA,YAAY,EAAvB;;AAEA,qBAAKD,eAAL,CAAqBC,QAArB;AACH,aAND,CAME,OAAO2B,KAAP,EAAc,CAEf;AAEJ;AAEJ,KArFI;;AAuFLC,iBAAa,uBAAW;AACpB,YAAIC,UAAU,KAAK7C,OAAL,CAAaqC,IAAb,CAAkBD,MAAhC;AACA,aAAKpC,OAAL,CAAaqC,IAAb,CAAkBD,MAAlB,GAA2B,CAACS,OAA5B;AACH,KA1FI;;AA4FLC,kBAAc,wBAAY;AACtBvD,WAAGiD,GAAH,CAAOC,YAAP,CAAoBM,UAApB,CAA+B,UAA/B;AACAxD,WAAG0B,GAAH,CAAO,cAAP;AACA1B,WAAG0C,QAAH,CAAYC,SAAZ,CAAsB,OAAtB;AACH,KAhGI;;AAkGLc,YAAQ,kBAAW;AACfzD,WAAG0B,GAAH,CAAO,QAAP;AACA1B,WAAG0C,QAAH,CAAYC,SAAZ,CAAsB,OAAtB;AACH;;AArGI,CAAT","file":"Startscene.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n\r\n        scoreview:cc.Node,\r\n        scoreItem:cc.Prefab,\r\n\r\n        setview:cc.Sprite,\r\n\r\n        //music: cc.AudioSource,\r\n        slider_h: cc.Slider\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.scoreview = this.scoreview.getComponent(cc.ScrollView)\r\n    },\r\n\r\n    //在Slider组件中回调函数\r\n    onSliderHEvent (sender) {\r\n       this.volumeSetting(sender.progress);\r\n    }, \r\n\r\n    start (){\r\n\r\n    },\r\n\r\n    volumeSetting: function(volume) {\r\n        cc.audioEngine.setEffectsVolume(volume);\r\n    },\r\n\r\n    // update (dt) {},\r\n    updateScoreList: function(scoreArr) {\r\n        cc.log(\"updateScoreList\",scoreArr)\r\n        for(var i = 0,cnt = scoreArr.length;i<cnt;i++)\r\n        {\r\n            let item = cc.instantiate(this.scoreItem)\r\n            let itemData = scoreArr[i]\r\n            let label = item.getChildByName(\"label\")\r\n            label.getComponent(cc.Label).string = \"score:\"+itemData.score +\"    \"+\"time:\"+ itemData.time\r\n\r\n            this.scoreview.content.addChild(item)   \r\n        }\r\n    },\r\n\r\n    playGame: function() {\r\n        cc.log(\"playGame\");\r\n        cc.director.loadScene('game');\r\n    },\r\n\r\n    checkShowScoreView: function() {\r\n        let active = this.scoreview.node.active\r\n        this.scoreview.node.active = !active\r\n\r\n        if(this.scoreview.node.active){\r\n            try {\r\n                var scoreArr = JSON.parse(cc.sys.localStorage.getItem('scoreArr'));\r\n\r\n                scoreArr = scoreArr || []\r\n\r\n                this.updateScoreList(scoreArr)\r\n            } catch (error) {\r\n                \r\n            }\r\n            \r\n        }\r\n            \r\n    },\r\n\r\n    gameSetView: function() {\r\n        let active1 = this.setview.node.active\r\n        this.setview.node.active = !active1\r\n    },\r\n\r\n    clearStorage: function () {\r\n        cc.sys.localStorage.removeItem('scoreArr');\r\n        cc.log(\"clearStorage\");\r\n        cc.director.loadScene('start');\r\n    },\r\n\r\n    goBack: function() {\r\n        cc.log(\"goBack\");\r\n        cc.director.loadScene('start');\r\n    },\r\n\r\n    \r\n});\r\n\r\n"]}